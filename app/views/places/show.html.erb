<% @user = User.find_by({ "id" => session["user_id"] }) %>
<% if @user != nil %>
<h2 class="mb-3"><%= @place["name"] %></h2>

<div class="mb-3">
  <a href="/entries/new?place_id=<%= @place["id"] %>" class="btn btn-primary">New Entry</a>
</div>

<div class="row">
  <% for entry in @entries %>
    <div class="col-sm-6 col-md-3">
      <h3><%= entry["title"] %></h3>
      <div class="small fst-italic"><%= entry["occurred_on"] %></div>
      <% if entry.uploaded_image.attached? %>
        <img src="<%= url_for(entry.uploaded_image) %>" class="img-fluid">
      <% else %>
        <img src="<%= entry["image"] %>" class="img-fluid">
      <% end %>

      <p><%= entry["description"] %></p>
    </div>
  <% end %>
</div>


<div class="mb-3">
  <a href="/places" class="btn btn-primary">Back to All Places</a>
</div>

<% else %>
  You must first <a href="/login">login</a> to view a place.
<% end %>